<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - ExamMate & NotesMaker</title>
    <link rel="stylesheet" href="admin-dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="admin-header">
            <div class="admin-avatar">
                <i class="fas fa-user-shield"></i>
            </div>
            <h3>Admin Panel</h3>
            <p id="adminName">Administrator</p>
            <div class="admin-status">
                <span class="status-dot"></span>
                <span>Online</span>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <li><a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a></li>
                <li><a href="#pdf-notes" class="nav-link" onclick="showSection('pdf-notes')">
                    <i class="fas fa-file-pdf"></i> PDF Notes Management
                </a></li>
                <li><a href="#posters" class="nav-link" onclick="showSection('posters')">
                    <i class="fas fa-image"></i> Poster/Banner Management
                </a></li>
                <li><a href="#student-uploads" class="nav-link" onclick="showSection('student-uploads')">
                    <i class="fas fa-upload"></i> Student Uploads
                </a></li>
                <li><a href="#services" class="nav-link" onclick="showSection('services')">
                    <i class="fas fa-concierge-bell"></i> Services Management
                </a></li>
                <li><a href="#users" class="nav-link" onclick="showSection('users')">
                    <i class="fas fa-users"></i> User Management
                </a></li>
                <li><a href="#analytics" class="nav-link" onclick="showSection('analytics')">
                    <i class="fas fa-chart-bar"></i> Analytics
                </a></li>
            </ul>
        </nav>
        
        <div class="sidebar-footer">
            <button class="btn-logout" onclick="logoutAdmin()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section active">
            <div class="section-header">
                <h1>Admin Dashboard</h1>
                <p>Welcome to ExamMate & NotesMaker Admin Panel</p>
            </div>
            
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div class="stat-content">
                        <h3 id="totalUsers">0</h3>
                        <p>Total Users</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-file-pdf"></i></div>
                    <div class="stat-content">
                        <h3 id="totalNotes">0</h3>
                        <p>Active Notes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-upload"></i></div>
                    <div class="stat-content">
                        <h3 id="totalUploads">0</h3>
                        <p>Pending Uploads</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-rupee-sign"></i></div>
                    <div class="stat-content">
                        <h3 id="totalRevenue">₹0</h3>
                        <p>Total Revenue</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-content">
                <div class="card">
                    <h3>Recent Activity</h3>
                    <div id="recentActivity" class="activity-list">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- PDF Notes Management Section -->
        <div id="pdf-notes-section" class="section">
            <div class="section-header">
                <h1>PDF Notes Management</h1>
                <p>Upload, manage, and organize study notes</p>
            </div>
            
            <div class="controls">
                <button class="btn-primary" onclick="showAddNoteForm()">
                    <i class="fas fa-plus"></i> Add New Note
                </button>
                <div class="search-container">
                    <input type="text" id="noteSearch" placeholder="Search notes..." onkeyup="searchNotes()">
                    <select id="noteStatusFilter" onchange="filterNotesByStatus()">
                        <option value="all">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table id="notesTable">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Subject</th>
                            <th>Exam</th>
                            <th>Pages</th>
                            <th>Price</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="notesTableBody">
                        <!-- Note rows will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Poster/Banner Management Section -->
        <div id="posters-section" class="section">
            <div class="section-header">
                <h1>Poster/Banner Management</h1>
                <p>Manage website banners and promotional images</p>
            </div>
            
            <div class="controls">
                <button class="btn-primary" onclick="showAddPosterForm()">
                    <i class="fas fa-plus"></i> Add New Poster
                </button>
            </div>

            <div class="posters-grid" id="postersGrid">
                <!-- Poster cards will be loaded here -->
            </div>
        </div>

        <!-- Student Uploads Section -->
        <div id="student-uploads-section" class="section">
            <div class="section-header">
                <h1>Student Uploads</h1>
                <p>Review and manage student submissions</p>
            </div>
            
            <div class="controls">
                <div class="search-container">
                    <input type="text" id="uploadSearch" placeholder="Search uploads..." onkeyup="searchUploads()">
                    <select id="uploadStatusFilter" onchange="filterUploadsByStatus()">
                        <option value="all">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table id="uploadsTable">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>Exam</th>
                            <th>File</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="uploadsTableBody">
                        <!-- Upload rows will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Services Management Section -->
        <div id="services-section" class="section">
            <div class="section-header">
                <h1>Services Management</h1>
                <p>Manage and update service offerings</p>
            </div>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-header">
                        <h3>Expert Notes</h3>
                        <span class="service-status">Active</span>
                    </div>
                    <div class="service-content">
                        <p>Professional educators create comprehensive study materials</p>
                        <button class="btn-secondary" onclick="editService('expert-notes')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
                
                <div class="service-card">
                    <div class="service-header">
                        <h3>Hard Copy Notes</h3>
                        <span class="service-status">Active</span>
                    </div>
                    <div class="service-content">
                        <p>Printed copies of notes delivered to your doorstep</p>
                        <button class="btn-secondary" onclick="editService('hard-copy')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
                
                <div class="service-card">
                    <div class="service-header">
                        <h3>Question Upload</h3>
                        <span class="service-status">Active</span>
                    </div>
                    <div class="service-content">
                        <p>Upload previous year questions for expert solutions</p>
                        <button class="btn-secondary" onclick="editService('question-upload')">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Management Section -->
        <div id="users-section" class="section">
            <div class="section-header">
                <h1>User Management</h1>
                <p>Manage registered users and their subscriptions</p>
            </div>
            
            <div class="controls">
                <div class="search-container">
                    <input type="text" id="userSearch" placeholder="Search users..." onkeyup="searchUsers()">
                    <select id="userRoleFilter" onchange="filterUsersByRole()">
                        <option value="all">All Roles</option>
                        <option value="student">Students</option>
                        <option value="admin">Admins</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table id="usersTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Join Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- User rows will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analytics-section" class="section">
            <div class="section-header">
                <h1>Analytics</h1>
                <p>Website performance and user insights</p>
            </div>
            
            <div class="analytics-grid">
                <div class="chart-card">
                    <h3>Monthly Revenue</h3>
                    <canvas id="revenueChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>User Growth</h3>
                    <canvas id="userChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Note Downloads</h3>
                    <canvas id="downloadChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Note Modal -->
    <div id="noteFormModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="noteFormTitle">Add New Note</h3>
                <span class="close" onclick="closeNoteForm()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="noteForm" enctype="multipart/form-data">
                    <input type="hidden" id="noteId">
                    
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="noteTitle" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Subject</label>
                        <input type="text" id="noteSubject" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Exam/Class/University</label>
                        <input type="text" id="noteExam" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Pages</label>
                        <input type="number" id="notePages" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Price (₹)</label>
                        <input type="number" id="notePrice" required>
                    </div>
                    
                    <div class="form-group">
                        <label>PDF File</label>
                        <input type="file" id="notePdfFile" accept=".pdf" required>
                        <div class="file-preview" id="pdfPreview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>Poster Image</label>
                        <input type="file" id="notePosterFile" accept="image/*">
                        <div class="image-preview" id="posterPreview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>Status</label>
                        <select id="noteStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Save Note</button>
                        <button type="button" class="btn-secondary" onclick="closeNoteForm()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit Poster Modal -->
    <div id="posterFormModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="posterFormTitle">Add New Poster</h3>
                <span class="close" onclick="closePosterForm()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="posterForm" enctype="multipart/form-data">
                    <input type="hidden" id="posterId">
                    
                    <div class="form-group">
                        <label>Location</label>
                        <select id="posterLocation" required>
                            <option value="homepage">Home Page</option>
                            <option value="services">Services Section</option>
                            <option value="promotions">Promotions</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Image</label>
                        <input type="file" id="posterImageFile" accept="image/*" required>
                        <div class="image-preview" id="posterImagePreview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>Status</label>
                        <select id="posterStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Save Poster</button>
                        <button type="button" class="btn-secondary" onclick="closePosterForm()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Upload Review Modal -->
    <div id="uploadReviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Review Student Upload</h3>
                <span class="close" onclick="closeUploadReviewModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="uploadReviewContent">
                    <!-- Upload content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script src="admin-dashboard.js"></script>
</body>
</html>
